(window.webpackJsonpaviasales_v2=window.webpackJsonpaviasales_v2||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/logo.c5fcf845.png"},function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(3),c=a.n(r),i=(a(11),a(4)),o=a(1),l="https://front-test.beta.aviasales.ru/search",u="https://front-test.beta.aviasales.ru/tickets?searchId=",m=(a(12),function(){return s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"lds-dual-ring"}))}),d=(a(13),function(e,t){var a=new Date(e),n=new Date(a.getTime()+6e4*t);return"".concat(a.getHours()>9?a.getHours():"0"+a.getHours(),":").concat(a.getMinutes()>9?a.getMinutes():"0"+a.getMinutes()," - \n      ").concat(n.getHours()>9?n.getHours():"0"+n.getHours(),":").concat(n.getMinutes()>9?n.getMinutes():"0"+n.getMinutes())}),g=function(e){var t=Math.trunc(e/60),a=e-60*t;return"".concat(t," \u0447 ").concat(a," \u043c")},f=function(e){return s.a.createElement("div",null,void 0===e.apiState?s.a.createElement(m,null):0!==e.apiState.length?function(e,t){var a=[],n=new Array(e.length);switch(t){case"price":for(var s=0;s<e.length;s++)a.push(e[s].price);a.sort((function(e,t){return e-t}));for(var r=0;r<e.length;r++)n[a.indexOf(e[r].price)]=e[r];return n;case"fast":for(var c=0;c<e.length;c++)a.push(e[c].segments[0].duration+e[c].segments[1].duration);a.sort((function(e,t){return e-t}));for(var i=0;i<e.length;i++)n[a.indexOf(e[i].segments[0].duration+e[i].segments[1].duration)]=e[i];return n;default:return e}}(e.apiState,e.tabsSort).slice(0,5).map((function(t,a){return s.a.createElement("div",{key:a,className:"ticket"},s.a.createElement("div",{className:"ticket__header"},s.a.createElement("h3",{className:"ticket__price"},t.price.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")," P"),s.a.createElement("div",{className:"ticket__logo"},s.a.createElement("img",{src:"//pics.avs.io/99/36/".concat(t.carrier,".png"),alt:"air logo"}))),s.a.createElement("div",{className:"ticket__way"},s.a.createElement("div",{className:"ticket__route"},s.a.createElement("h4",{className:"ticket__title"},t.segments[0].origin," - ",t.segments[0].destination),s.a.createElement("p",{className:"ticket__descr"},d(t.segments[0].date,t.segments[0].duration))),s.a.createElement("div",{className:"ticket__lenght"},s.a.createElement("h4",{className:"ticket__title"},"\u0412 \u043f\u0443\u0442\u0438"),s.a.createElement("p",{className:"ticket__descr"},g(t.segments[0].duration))),s.a.createElement("div",{className:"ticket__stops"},s.a.createElement("h4",{className:"ticket__title"},e.filtres[t.segments[0].stops.length+1].titleForTicket),s.a.createElement("p",{className:"ticket__descr"},0!==t.segments[0].stops.length?t.segments[0].stops.toString():"\u041f\u0440\u044f\u043c\u043e\u0439"))),s.a.createElement("div",{className:"ticket__way"},s.a.createElement("div",{className:"ticket__route"},s.a.createElement("h4",{className:"ticket__title"},t.segments[1].destination," - ",t.segments[1].origin),s.a.createElement("p",{className:"ticket__descr"},d(t.segments[1].date,t.segments[1].duration))),s.a.createElement("div",{className:"ticket__lenght"},s.a.createElement("h4",{className:"ticket__title"},"\u0412 \u043f\u0443\u0442\u0438"),s.a.createElement("p",{className:"ticket__descr"},g(t.segments[1].duration))),s.a.createElement("div",{className:"ticket__stops"},s.a.createElement("h4",{className:"ticket__title"},e.filtres[t.segments[1].stops.length+1].titleForTicket),s.a.createElement("p",{className:"ticket__descr"},0!==t.segments[1].stops.length?t.segments[1].stops.toString():"\u041f\u0440\u044f\u043c\u043e\u0439"))))})):s.a.createElement("div",{className:"no-tickets"},"\u0411\u0438\u043b\u0435\u0442\u043e\u0432 \u043d\u0435\u0442"))},p=a(5),_=a.n(p),v=function(){return console.log("logo"),s.a.createElement("div",{className:"logo"},s.a.createElement("img",{src:_.a,alt:"Aviasales logo"}))},h=(a(14),function(e){return s.a.createElement("div",{className:"filters"},s.a.createElement("h3",{className:"filters__title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),e.stopsFiltres.map((function(t,a){return s.a.createElement("div",{key:a,className:"filters__item"},s.a.createElement("input",{type:"checkbox",name:t.id,id:t.id,defaultChecked:t.status,hidden:!0}),s.a.createElement("label",{htmlFor:t.id,type:t.id,onClick:e.onClick},t.titleForFilter))})))}),k=(a(15),function(e){return s.a.createElement("div",{className:"tabs"},s.a.createElement("div",{className:"price"===e.tabsSort?"tabs__item active":"tabs__item",onClick:e.onClick,type:"price"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),s.a.createElement("div",{className:"fast"===e.tabsSort?"tabs__item active":"tabs__item",onClick:e.onClick,type:"fast"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))});a(16),a(17);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var b=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),m=Object(o.a)(c,2),d=m[0],g=m[1],p=Object(n.useState)("price"),_=Object(o.a)(p,2),b=_[0],N=_[1],O=Object(n.useState)([{id:"all",status:!0,titleForFilter:"\u0412\u0441\u0435",titleForTicket:"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{id:"noStops",status:!0,titleForFilter:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",titleForTicket:"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{id:"oneStops",status:!0,titleForFilter:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",titleForTicket:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"},{id:"twoStops",status:!0,titleForFilter:"2 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",titleForTicket:"2 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{id:"threeStops",status:!0,titleForFilter:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",titleForTicket:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}]),w=Object(o.a)(O,2),y=w[0],j=w[1];Object(n.useEffect)((function(){fetch(l).then((function(e){return e.json()})).then((function(e){return fetch(u+"".concat(e.searchId)).then((function(e){return 200===e.status?e.json():g(!0)})).then((function(e){return r(e.tickets)})).catch((function(e){return console.log(e)}))}))}),[d]);var F=Object(n.useCallback)((function(e){var t=e.target;console.log("tabs"),t.classList.contains("active")||N(t.getAttribute("type"))}),[]),S=Object(n.useCallback)((function(e){var t=e.target.getAttribute("type");console.log("stops"),j(y.map((function(e){return e.id===t?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{status:!e.status}):e})))}),[y]);return s.a.createElement("div",{className:"main"},s.a.createElement(v,null),s.a.createElement("div",{className:"main__inner"},s.a.createElement(h,{onClick:S,stopsFiltres:y}),s.a.createElement("div",{className:"result"},s.a.createElement(k,{onClick:F,tabsSort:b}),s.a.createElement(f,{tabsSort:b,filtres:y,apiState:function(e,t){if(void 0!==e){if("all"===t[0].id&&t[0].status)return e;var a=t.slice(1,5).map((function(e){return e.status}));return e.filter((function(e){return e.segments.every((function(e){return a[e.stops.length]}))}))}}(a,y)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.2380990f.chunk.js.map